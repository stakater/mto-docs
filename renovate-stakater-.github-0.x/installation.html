
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.stakater.com/renovate-stakater-.github-0.x/installation.html">
      
      
        <link rel="prev" href="features.html">
      
      
        <link rel="next" href="integration-config.html">
      
      <link rel="icon" href="assets/images/favicon.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>Installation - Multi Tenant Operator</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-TTH1YYW5TX"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-TTH1YYW5TX",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-TTH1YYW5TX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../."> 
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Multi Tenant Operator" class="md-header__button md-logo" aria-label="Multi Tenant Operator" data-md-component="logo">
      
  <img src="assets/images/favicon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Multi Tenant Operator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/stakater/mto-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Multi Tenant Operator" class="md-nav__button md-logo" aria-label="Multi Tenant Operator" data-md-component="logo">
      
  <img src="assets/images/favicon.svg" alt="logo">

    </a>
    Multi Tenant Operator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/stakater/mto-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="eula.html" class="md-nav__link">
        Multi Tenant Operator End User License Agreement
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="features.html" class="md-nav__link">
        Features
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="installation.html" class="md-nav__link md-nav__link--active">
        Installation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-via-operatorhub-ui" class="md-nav__link">
    Installing via OperatorHub UI
  </a>
  
    <nav class="md-nav" aria-label="Installing via OperatorHub UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-integrationconfig" class="md-nav__link">
    Configuring IntegrationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-via-cli-or-gitops" class="md-nav__link">
    Installing via CLI OR GitOps
  </a>
  
    <nav class="md-nav" aria-label="Installing via CLI OR GitOps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-integrationconfig_1" class="md-nav__link">
    Configuring IntegrationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstall-via-operatorhub-ui" class="md-nav__link">
    Uninstall via OperatorHub UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="integration-config.html" class="md-nav__link">
        Integration Config
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="customresources.html" class="md-nav__link">
        Custom Resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="tenant-roles.html" class="md-nav__link">
        Tenant Member Roles
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Use Cases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Use Cases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/quota.html" class="md-nav__link">
        Enforcing Resources Quotas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/tenant.html" class="md-nav__link">
        Creating Tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/namespace.html" class="md-nav__link">
        Creating Namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/volume-limits.html" class="md-nav__link">
        Limiting PersistentVolume for Tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/template.html" class="md-nav__link">
        Creating Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/deploying-templates.html" class="md-nav__link">
        Deploying Template to Namespaces via Tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/extend-default-roles.html" class="md-nav__link">
        Extending the default access level for tenant members
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/custom-roles.html" class="md-nav__link">
        Changing the default access level for tenant owners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/mapping-resources.html" class="md-nav__link">
        Mapping Resources across Tenant Namespaces via TGI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/secret-distribution.html" class="md-nav__link">
        Propagate Secrets from Parent to Descendant namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/configuring-multitenant-network-isolation.html" class="md-nav__link">
        Configuring Multi-Tenant Isolation with Network Policy Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/distributing-secrets-using-sealed-secret-template.html" class="md-nav__link">
        Distributing Secrets Using Sealed Secrets Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/integrationconfig.html" class="md-nav__link">
        Configuring Managed Namespaces and ServiceAccounts in IntegrationConfig
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/argocd.html" class="md-nav__link">
        ArgoCD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/mattermost.html" class="md-nav__link">
        Creating Mattermost Teams for your tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/admin-clusterrole.html" class="md-nav__link">
        Extending Admin ClusterRole
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/hibernation.html" class="md-nav__link">
        Freeing up unused resources with hibernation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="usecases/private-sandboxes.html" class="md-nav__link">
        Create Private Sandboxes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="hibernation.html" class="md-nav__link">
        Hibernating Namespaces
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="argocd-multitenancy.html" class="md-nav__link">
        ArgoCD Multi-tenancy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="vault-multitenancy.html" class="md-nav__link">
        Vault Multitenancy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="changelog.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="troubleshooting.html" class="md-nav__link">
        Troubleshooting Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="faq.html" class="md-nav__link">
        FAQs
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-via-operatorhub-ui" class="md-nav__link">
    Installing via OperatorHub UI
  </a>
  
    <nav class="md-nav" aria-label="Installing via OperatorHub UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-integrationconfig" class="md-nav__link">
    Configuring IntegrationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-via-cli-or-gitops" class="md-nav__link">
    Installing via CLI OR GitOps
  </a>
  
    <nav class="md-nav" aria-label="Installing via CLI OR GitOps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-integrationconfig_1" class="md-nav__link">
    Configuring IntegrationConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstall-via-operatorhub-ui" class="md-nav__link">
    Uninstall via OperatorHub UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installation">Installation</h1>
<p>This document contains instructions on installing, uninstalling and configuring Multi Tenant Operator using OpenShift MarketPlace.</p>
<ol>
<li>
<p><a href="#installing-via-operatorhub-ui">OpenShift OperatorHub UI</a></p>
</li>
<li>
<p><a href="#installing-via-cli-or-gitops">CLI/GitOps</a></p>
</li>
<li>
<p><a href="#uninstall-via-operatorhub-ui">Uninstall</a></p>
</li>
</ol>
<h2 id="requirements">Requirements</h2>
<ul>
<li>An <strong>OpenShift</strong> cluster [v4.7 - v4.12]</li>
</ul>
<h2 id="installing-via-operatorhub-ui">Installing via OperatorHub UI</h2>
<ul>
<li>After opening OpenShift console click on <code>Operators</code>, followed by <code>OperatorHub</code> from the side menu</li>
</ul>
<p><img alt="image" src="images/operatorHub.png" /></p>
<ul>
<li>Now search for <code>Multi Tenant Operator</code> and then click on <code>Multi Tenant Operator</code> tile</li>
</ul>
<p><img alt="image" src="images/search_tenant_operator_operatorHub.png" /></p>
<ul>
<li>Click on the <code>install</code> button</li>
</ul>
<p><img alt="image" src="images/to_install_1.png" /></p>
<ul>
<li>Select <code>Updated channel</code>. Select <code>multi-tenant-operator</code> to install the operator in <code>multi-tenant-operator</code> namespace from <code>Installed Namespace</code> dropdown menu. After configuring <code>Update approval</code> click on the <code>install</code> button.</li>
</ul>
<blockquote>
<p>Note: Use <code>stable</code> channel for seamless upgrades. For <code>Production Environment</code> prefer <code>Manual</code> approval and use <code>Automatic</code> for <code>Development Environment</code></p>
</blockquote>
<p><img alt="image" src="images/to_install_2.png" /></p>
<ul>
<li>Wait for the operator to be installed</li>
</ul>
<p><img alt="image" src="images/to_install_wait.png" /></p>
<ul>
<li>Once successfully installed, MTO will be ready to enforce multi-tenancy in your cluster</li>
</ul>
<p><img alt="image" src="images/to_installed_successful.png" /></p>
<blockquote>
<p>Note: MTO will be installed in <code>multi-tenant-operator</code> namespace.</p>
</blockquote>
<h3 id="configuring-integrationconfig">Configuring IntegrationConfig</h3>
<p>IntegrationConfig is required to configure the settings of multi-tenancy for MTO.</p>
<ul>
<li>We recommend using the following IntegrationConfig as a starting point</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenantoperator.stakater.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IntegrationConfig</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant-operator-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multi-tenant-operator</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">openshift</span><span class="p">:</span>
<span class="w">    </span><span class="nt">privilegedNamespaces</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^openshift-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^kube-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^redhat-*</span>
<span class="w">    </span><span class="nt">privilegedServiceAccounts</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:default-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:openshift-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:kube-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:redhat-*</span>
</code></pre></div>
<p>For more details and configurations check out <a href="integration-config.html">IntegrationConfig</a>.</p>
<h2 id="installing-via-cli-or-gitops">Installing via CLI OR GitOps</h2>
<ul>
<li>Create namespace <code>multi-tenant-operator</code></li>
</ul>
<div class="highlight"><pre><span></span><code>oc<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>multi-tenant-operator
namespace/multi-tenant-operator<span class="w"> </span>created
</code></pre></div>
<ul>
<li>Create an OperatorGroup YAML for MTO and apply it in <code>multi-tenant-operator</code> namespace.</li>
</ul>
<div class="highlight"><pre><span></span><code>oc<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: operators.coreos.com/v1</span>
<span class="s">kind: OperatorGroup</span>
<span class="s">metadata:</span>
<span class="s">  name: tenant-operator</span>
<span class="s">  namespace: multi-tenant-operator</span>
<span class="s">EOF</span>
operatorgroup.operators.coreos.com/tenant-operator<span class="w"> </span>created
</code></pre></div>
<ul>
<li>Create a subscription YAML for MTO and apply it in <code>multi-tenant-operator</code> namespace. To enable console set <code>.spec.config.env[].ENABLE_CONSOLE</code> to <code>true</code>. This will create a route resource, which can be used to access the Multi-Tenant-Operator console.</li>
</ul>
<div class="highlight"><pre><span></span><code>oc<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">apiVersion: operators.coreos.com/v1alpha1</span>
<span class="s">kind: Subscription</span>
<span class="s">metadata:</span>
<span class="s">  name: tenant-operator</span>
<span class="s">  namespace: multi-tenant-operator</span>
<span class="s">spec:</span>
<span class="s">  channel: stable</span>
<span class="s">  installPlanApproval: Automatic</span>
<span class="s">  name: tenant-operator</span>
<span class="s">  source: certified-operators</span>
<span class="s">  sourceNamespace: openshift-marketplace</span>
<span class="s">  startingCSV: tenant-operator.v0.9.1</span>
<span class="s">  config:</span>
<span class="s">    env:</span>
<span class="s">      - name: ENABLE_CONSOLE</span>
<span class="s">        value: &#39;true&#39;</span>
<span class="s">EOF</span>
subscription.operators.coreos.com/tenant-operator<span class="w"> </span>created
</code></pre></div>
<blockquote>
<p>Note: To bring MTO via GitOps, add the above files in GitOps repository.</p>
</blockquote>
<ul>
<li>After creating the <code>subscription</code> custom resource open OpenShift console and click on <code>Operators</code>, followed by <code>Installed Operators</code> from the side menu</li>
</ul>
<p><img alt="image" src="images/to_sub_installation_wait.png" /></p>
<ul>
<li>Wait for the installation to complete</li>
</ul>
<p><img alt="image" src="images/to_sub_installation_successful.png" /></p>
<ul>
<li>Once the installation is complete click on <code>Workloads</code>, followed by <code>Pods</code> from the side menu and select <code>multi-tenant-operator</code> project</li>
</ul>
<p><img alt="image" src="images/select_multi_tenant_operator_project.png" /></p>
<ul>
<li>Once pods are up and running, MTO will be ready to enforce multi-tenancy in your cluster</li>
</ul>
<p><img alt="image" src="images/to_installed_successful_pod.png" /></p>
<h3 id="configuring-integrationconfig_1">Configuring IntegrationConfig</h3>
<p>IntegrationConfig is required to configure the settings of multi-tenancy for MTO.</p>
<ul>
<li>We recommend using the following IntegrationConfig as a starting point:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenantoperator.stakater.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IntegrationConfig</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tenant-operator-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">multi-tenant-operator</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">openshift</span><span class="p">:</span>
<span class="w">    </span><span class="nt">privilegedNamespaces</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^openshift-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^kube-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^redhat-*</span>
<span class="w">    </span><span class="nt">privilegedServiceAccounts</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:default-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:openshift-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:kube-*</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^system:serviceaccount:redhat-*</span>
</code></pre></div>
<p>For more details and configurations check out <a href="integration-config.html">IntegrationConfig</a>.</p>
<h2 id="uninstall-via-operatorhub-ui">Uninstall via OperatorHub UI</h2>
<p>You can uninstall MTO by following these steps:</p>
<ul>
<li>
<p>Decide on whether you want to retain tenant namespaces and ArgoCD AppProjects or not. If yes, please set <code>spec.onDelete.cleanNamespaces</code> to <code>false</code> for all those tenants whose namespaces you want to retain, and <code>spec.onDelete.cleanAppProject</code> to <code>false</code> for all those tenants whose AppProject you want to retain. For more details check out <a href="usecases/tenant.html#retaining-tenant-namespaces-and-appproject-when-a-tenant-is-being-deleted">onDelete</a></p>
</li>
<li>
<p>After making the required changes open OpenShift console and click on <code>Operators</code>, followed by <code>Installed Operators</code> from the side menu</p>
</li>
</ul>
<p><img alt="image" src="images/installed-operators.png" /></p>
<ul>
<li>Now click on uninstall and confirm uninstall.</li>
</ul>
<p><img alt="image" src="images/uninstall-from-ui.png" /></p>
<ul>
<li>
<p>Now the operator has been uninstalled.</p>
</li>
<li>
<p><code>Optional:</code> you can also manually remove MTO's CRDs and its resources from the cluster.</p>
</li>
</ul>
<h2 id="notes">Notes</h2>
<ul>
<li>For more details on how to use MTO please refer <a href="usecases/quota.html">use-cases</a>.</li>
<li>For more details on how to extend your MTO manager ClusterRole please refer <a href="usecases/admin-clusterrole.html">extend-admin-clusterrole</a>.</li>
</ul>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
<p>Copyright &copy; 2023 Stakater AB â€“ <a href="#__consent">Change cookie settings</a></p>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  




<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>